<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="/public/style.css">
</head>
<body>
    <nav class="navbar">
        <a href="/view/index.html" class="logo">Logo</a>
        <div class="menu-toggle" onclick="toggleMenu()">
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div class="menu">
            <a href="/view/index.html">Log/register</a>
            <a href="/view/dashboard.html">Task</a>
            <a href="/view/profile.html">Profile</a>
        </div>
    </nav>
    <h1>Your Profile</h1>
    <div id="profileData"></div>
    <button id="logout">Logout</button>
    <script>
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = 'index.html';
        }
        document.getElementById('logout').addEventListener('click', () => {
            localStorage.removeItem('token');
            window.location.href = 'index.html';
        });
        async function fetchProfile() {
            try {
                const response = await fetch('http://localhost:8000/api/users/profile', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });
                if (!response.ok) throw new Error('Failed to fetch profile');
                const profile = await response.json();
                document.getElementById('profileData').innerHTML = `
                    <p>Username: ${profile.username}</p>
                    <p>Email: ${profile.email}</p>
                `;
            } catch (error) {
                console.error('Error:', error);
            }
        }
        fetchProfile();
        function toggleMenu() {
            document.querySelector(".menu").classList.toggle("active");
        }
    </script>
</body>
</html>
